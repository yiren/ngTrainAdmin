<div class="content-body container">
    <mat-accordion>
        <mat-expansion-panel [expanded]="true" hideToggle="true">
            <mat-expansion-panel-header>
                <mat-panel-title>

                </mat-panel-title>
                <mat-panel-description>
                    <h2>新增課程</h2>

                </mat-panel-description>
                <mat-icon>add_box</mat-icon>
            </mat-expansion-panel-header>

            <form [formGroup]="addCourseForm" (ngSubmit)="onSubmit()">
                <div fxLayout="column">
                    <mat-form-field>
                        <input placeholder="課程名稱" matInput formControlName="courseName">
                    </mat-form-field>


                    <mat-form-field>
                        <input matInput [matDatepicker]="startDate" [max]="endDate" placeholder="開訓日期" formControlName="courseStartDate">
                        <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
                        <mat-datepicker #startDate disabled="false"></mat-datepicker>
                    </mat-form-field>

                    <mat-form-field>
                        <input matInput [matDatepicker]="endDate" placeholder="結訓日期" formControlName="courseEndDate">
                        <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
                        <mat-datepicker #endDate disabled="false"></mat-datepicker>
                    </mat-form-field>


                    <mat-form-field>
                        <input placeholder="訓練時數" matInput formControlName="trainHours">
                    </mat-form-field>
                </div>


                <h6>各組:</h6>
                <div formGroupName="students" fxLayout="row no-wrap" fxLayoutAlign="space-between">

                    <mat-form-field *ngFor="let section of studentsBySection; let i=index">
                        <mat-select [placeholder]="section.sectionName" multiple [formControlName]="section.sectionCode">
                            <mat-option *ngFor="let student of section.students" [value]="student.studentId">{{student.studentName}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>


                <button mat-raised-button color="primary" type="submit" [disabled]="!addCourseForm.valid || isSubmitted">新增訓練課程</button>

                <mat-spinner *ngIf="isSubmitted">
                </mat-spinner>


            </form>
        </mat-expansion-panel>
    </mat-accordion>
</div>



<!-- 
<p>
    <mat-form-field>
        <mat-select placeholder="學員" formControlName="students" multiple>
            <mat-optgroup *ngFor="let section of studentsBySection" [label]="section.sectionName">
                <mat-option *ngFor="let student of section.students" [value]="student.studentId">
                    {{ student.studentName }}
                </mat-option>
            </mat-optgroup>
        </mat-select>
    </mat-form-field>
</p>
<mat-checkbox class="example-margin" [(ngModel)]="checked" value="xx">Checked</mat-checkbox>

<pre>
  {{checked}}
</pre>

-->